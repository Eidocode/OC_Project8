{% extends 'products/base.html' %}

{% block content %}

<header class="masthead2">
    <div class="w-100 text-white justify-content-center text-center">
        <div class="banner" style="background-image: url({{ product.url_img }})" alt="" />
            <h1 class="pt-4">{{ product.name|truncatechars:40 }}</h1>
            <hr class="divider mt-3" />
            <p class="mt-5"><h4>Nutriscore</h4></p>
            {% with 'A B C D E' as list %}
                <ul class="list-inline">
                {% for score in list.split %}
                    {% if score|upper == product.score|upper %}
                        {% if score|upper < "C" %}
                            <li class="list-inline-item font-weight-bold text-success"><h1>{{ score|upper }}</h1></li>
                        {% elif score|upper == "C" %}
                            <li class="list-inline-item font-weight-bold text-warning"><h1>{{ score|upper }}</h1></li>
                        {% else %}
                            <li class="list-inline-item font-weight-bold text-danger"><h1>{{ score|upper }}</h1></li>
                        {% endif %}
                    {% else %}
                        <li class="list-inline-item"><h2>{{ score|upper }}</h2></li>
                    {% endif %}
                {% endfor %}
                </ul>
            {% endwith %}
        </div>
    </div>
</header>

<section class="sign">
    <div class="container">
        <div class="row align-items-center justify-content-center text-center">
            <div class="col-lg-8 text-center">
                <h2 class="">Vous pouvez remplacer ce produit par :</h2>
            </div>

            <div id="portfolio" class="mt-5">
                <div class="container-fluid p-0">
                    <div class="row no-gutters">

                        {% for sub in substitutes %}
                            
                            <div width="180" height="200" class="py-1 px-1 col-lg-4 col-sm-6">
                                <a class="portfolio-box bg-thumbs shadow rounded-lg border border-white" >
                                    <img class="img my-4 rounded-lg shadow"  width="180" height="200" src={{ sub.url_img }} alt=""/>
                                    <div class="portfolio-box-caption">
                                        <div class="project-category text-white-50">{{ sub.brand }}</div>
                                        <div class="project-name">{{ sub.name|truncatechars:40 }}</div>
                                        <h2 class="font-weight-bold pt-4">{{ sub.score|upper }}</h2>
                                    </div>
                                </a>
                                
                                {% if sub.id in fav_prods_id %}

                                    <div class="mb-5 mt-3">
                                        <button class="btn btn-outline-secondary btn-sm" role="button" title="Produit déjà enregistré" disabled>
                                            <i class="fas fa-save" aria-hidden="true"></i>
                                            Enregistrer
                                        </button>
                                    </div>

                                {% else %}

                                    <div class="mb-5 mt-3">
                                        <a class="btn btn-outline-primary btn-sm" href={% url 'favorite' product_id=sub.id %} role="button">
                                            <i class="fas fa-save" aria-hidden="true"></i>
                                            Enregistrer
                                        </a>
                                    </div>

                                {% endif %}

                            </div>

                        {% endfor %}

                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

{% endblock content %}